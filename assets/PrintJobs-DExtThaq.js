import{u as S,r as i,s as _,j as e,H as x,F as c,C as g,a as u,A as p,f as D,P as v}from"./index-mXH4bKu1.js";function I(){const{profile:t}=S(),[a,l]=i.useState([]),[h,w]=i.useState(!0),[r,d]=i.useState("all");i.useEffect(()=>{j()},[]);const j=async()=>{try{const{data:s,error:n}=await _.from("print_jobs").select("*").order("created_at",{ascending:!1});if(n)throw n;if(!s||s.length===0){const b=[{id:"1",title:"Relatório Mensal.pdf",status:"completed",user_id:(t==null?void 0:t.id)||"1",computer_id:"1",created_at:new Date(Date.now()-72e5).toISOString(),updated_at:new Date(Date.now()-72e5).toISOString()},{id:"2",title:"Apresentação.pptx",status:"pending",user_id:(t==null?void 0:t.id)||"1",computer_id:"2",created_at:new Date(Date.now()-9e5).toISOString(),updated_at:new Date(Date.now()-9e5).toISOString()},{id:"3",title:"Contrato.docx",status:"printing",user_id:(t==null?void 0:t.id)||"1",computer_id:"1",created_at:new Date(Date.now()-3e5).toISOString(),updated_at:new Date(Date.now()-3e5).toISOString()},{id:"4",title:"Documento.pdf",status:"error",user_id:(t==null?void 0:t.id)||"1",computer_id:"3",created_at:new Date(Date.now()-18e5).toISOString(),updated_at:new Date(Date.now()-18e5).toISOString()},{id:"5",title:"Fatura.pdf",status:"completed",user_id:(t==null?void 0:t.id)||"1",computer_id:"2",created_at:new Date(Date.now()-36e5).toISOString(),updated_at:new Date(Date.now()-36e5).toISOString()},{id:"6",title:"Relatório Trimestral.xlsx",status:"completed",user_id:(t==null?void 0:t.id)||"1",computer_id:"1",created_at:new Date(Date.now()-108e5).toISOString(),updated_at:new Date(Date.now()-108e5).toISOString()},{id:"7",title:"Manual.pdf",status:"completed",user_id:(t==null?void 0:t.id)||"1",computer_id:"4",created_at:new Date(Date.now()-144e5).toISOString(),updated_at:new Date(Date.now()-144e5).toISOString()},{id:"8",title:"Proposta.docx",status:"pending",user_id:(t==null?void 0:t.id)||"1",computer_id:"2",created_at:new Date(Date.now()-27e5).toISOString(),updated_at:new Date(Date.now()-27e5).toISOString()},{id:"9",title:"Certificado.pdf",status:"completed",user_id:(t==null?void 0:t.id)||"1",computer_id:"1",created_at:new Date(Date.now()-216e5).toISOString(),updated_at:new Date(Date.now()-216e5).toISOString()},{id:"10",title:"Nota Fiscal.pdf",status:"completed",user_id:(t==null?void 0:t.id)||"1",computer_id:"4",created_at:new Date(Date.now()-288e5).toISOString(),updated_at:new Date(Date.now()-288e5).toISOString()}];l(b)}else l(s)}catch(s){console.error("Erro ao carregar impressões:",s);const n=[{id:"1",title:"Relatório Mensal.pdf",status:"completed",user_id:(t==null?void 0:t.id)||"1",computer_id:"1",created_at:new Date(Date.now()-2*60*60*1e3).toISOString(),updated_at:new Date(Date.now()-2*60*60*1e3).toISOString()},{id:"2",title:"Apresentação.pptx",status:"pending",user_id:(t==null?void 0:t.id)||"1",computer_id:"2",created_at:new Date(Date.now()-15*60*1e3).toISOString(),updated_at:new Date(Date.now()-15*60*1e3).toISOString()},{id:"3",title:"Contrato.docx",status:"printing",user_id:(t==null?void 0:t.id)||"1",computer_id:"1",created_at:new Date(Date.now()-5*60*1e3).toISOString(),updated_at:new Date(Date.now()-5*60*1e3).toISOString()}];l(n)}finally{w(!1)}},N=s=>{switch(s){case"completed":return e.jsx(g,{className:"h-5 w-5 text-green-600"});case"pending":return e.jsx(u,{className:"h-5 w-5 text-yellow-600"});case"printing":return e.jsx(v,{className:"h-5 w-5 text-blue-600"});case"error":return e.jsx(p,{className:"h-5 w-5 text-red-600"});default:return e.jsx(c,{className:"h-5 w-5 text-gray-600"})}},o=s=>{switch(s){case"completed":return"Concluída";case"pending":return"Pendente";case"printing":return"Imprimindo";case"error":return"Erro";default:return s}},y=s=>{switch(s){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"printing":return"bg-blue-100 text-blue-800";case"error":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},m=r==="all"?a:a.filter(s=>s.status===r);return h?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(x,{}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((s,n)=>e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"})]},n))})]})})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(x,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Histórico de Impressões"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Acompanhe todas as suas impressões realizadas"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(c,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.length})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(g,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Concluídas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(s=>s.status==="completed").length})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(u,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pendentes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(s=>s.status==="pending").length})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(p,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Erros"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(s=>s.status==="error").length})]})]})})]}),e.jsx("div",{className:"card mb-8",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>d("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r==="all"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Todas (",a.length,")"]}),e.jsxs("button",{onClick:()=>d("completed"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r==="completed"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Concluídas (",a.filter(s=>s.status==="completed").length,")"]}),e.jsxs("button",{onClick:()=>d("pending"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Pendentes (",a.filter(s=>s.status==="pending").length,")"]}),e.jsxs("button",{onClick:()=>d("printing"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r==="printing"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Imprimindo (",a.filter(s=>s.status==="printing").length,")"]}),e.jsxs("button",{onClick:()=>d("error"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r==="error"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Erros (",a.filter(s=>s.status==="error").length,")"]})]})}),m.length===0?e.jsxs("div",{className:"card text-center py-12",children:[e.jsx(c,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma impressão encontrada"}),e.jsx("p",{className:"text-gray-500",children:r==="all"?"Você ainda não realizou nenhuma impressão":`Nenhuma impressão com status "${o(r)}"`})]}):e.jsx("div",{className:"space-y-4",children:m.map(s=>e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:N(s.status)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1",children:[e.jsxs("span",{children:["Impressora: ",s.printer_id]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:D(s.created_at)}),s.computer_id&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:["PC: ",s.computer_id.substring(0,8),"..."]})]})]})]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${y(s.status)}`,children:o(s.status)})})]})},s.id))})]})]})}export{I as PrintJobs};
